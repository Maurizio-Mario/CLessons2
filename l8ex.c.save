#include<stdio.h>
#include<stdlib.h>
#define DIM 10

int gcd2(int a, int b){
    	int temp;
    	while (b != 0){
        	temp = a % b;
		a = b;
        	b = temp;
    	}
    	return a;
}

void gdc3(){
	int m1 = 0;
	int m2 = 0;
	int a = 0; int b = 0; int c = 0;
	printf("Please type three integers:\n");
	scanf("%d%d%d", &a, &b, &c);
	m1 = gcd2(a, b);
	if(m1 != 0){
		m2 = gcd2(m1, c);
		printf("The gcd of %d, %d and %d is %d.\n",a, b, c, m2);
	}
}

void isPrime(){
	int x = 0;
	int i;
	int prime = 0;
	printf("\nEs. 2 - Check if a positive integer is prime.\n");
	do{
		printf("\nPlease type a valid number!\n");
		scanf("%d", &x);
	}while(x < 1);
	for(i = 2; i < (x / 2); i++){ 
		if(x % i == 0)
			prime = 1;
	}
	if(prime)
		printf("\n%d is not prime number!\n", x);
	else
		printf("\n%d is a prime number.\n", x);
}

void nextPrime(){
	int i;
	int x;
	int y;
	int prime;
	printf("Es. 3 - Print the first prime after the number of your choice.\n");
	do{
		printf("Type an integer:\n");
		scanf("%d", &x);
	}while(x < 1);
	y = x + 1;
	do{
		for(i = 2; i*i < y; i++){
			if(y % i == 0)
				prime = 0;
		}
		if(prime)
			printf("The first prime after %d is %d", x, y);
		else{
			y++;
		}
	}while(prime == 1);
}




void print100primes(){
	int n = 4;
	int i;
	int prime = 0;
	int counter = 3;	/*For every prime found, counter increases*/
	printf("1 2 3");
	while(counter < 101){
		for(i = 2; i < (n / 2); i++){
			if(n % i != 0)
				prime = 1;
		}
		if(prime == 1){
			printf("%4d", n);
			counter += 1;
			prime = 0;
		}
		n++;
	printf("The counter is %d", counter);
	}
}




int main(int argc, char *argv[]){
	int es;
	printf("\n\nExamples from lesson 8. Please choose one:\n\n"
		"\t1\tEs. 1 :\t MCD of three numbers;\n"
		"\t2\tEs. 2 :\t Test for prime number;\n"
		"\t3\tEs. 3 :\t Find next prime number;\n"
		"\t4\tEs. 4 :\t Find the first 100 prime numbers;\n"
		"\t*\tOther :\t Exit.\n");
	scanf("%d", &es);
	do{
		if(es == 1)
			gdc3();
		else if (es == 2)
			isPrime();
		else if(es == 3)
			nextPrime();
		else if(es == 4)
			print100primes();
	}while(es > 0 && es < 5);
return 0;
}



